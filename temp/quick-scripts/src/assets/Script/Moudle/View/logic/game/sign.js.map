{"version":3,"sources":["assets\\Script\\Moudle\\View\\logic\\game\\sign.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import LayerPanel, {UrlInfo} from \"../../../../Common/manage/Layer/LayerPanel\";\r\nimport Tools from \"../../../../Common/Tools\";\r\nimport gameConfig, {signData, signDataSeven} from \"../common/config\";\r\nimport CacheMgr from \"../../../../Common/manage/CacheMgr\";\r\nimport Constant from \"../../../../Common/Constant\";\r\nimport PanelMgr from \"../../../../Common/manage/PanelMgr\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Sign extends LayerPanel {\r\n\r\n    @property([cc.SpriteFrame])\r\n    type_spriteFrame: cc.SpriteFrame[] = []\r\n\r\n\r\n    public static getUrl(): UrlInfo {\r\n        return {\r\n            bundle: \"game\",\r\n            name: \"sign\"\r\n        }\r\n    }\r\n    private items: cc.Node [] = []\r\n    private get: cc.Node = null\r\n    private double_get: cc.Node = null\r\n    private close: cc.Node = null\r\n\r\n    initUI() {\r\n        this.get = this.getNode(\"get\")\r\n        this.onTouch(this.get, this.handle_get)\r\n        this.double_get = this.getNode(\"double\")\r\n        this.onTouch(this.double_get, this.handle_double_get)\r\n        this.close = this.getNode(\"btn\")\r\n        this.onTouch(this.close, () => {\r\n            PanelMgr.INS.closePanel(Sign) ;\r\n        })\r\n        let content = this.node.children[0]\r\n        for (let i = 0; i < content.childrenCount; i++) {\r\n            this.items.push(content.children[i])\r\n            if (i == 6) {\r\n                // this.changeItem7(content.children[i], gameConfig.singData7)\r\n            } else {\r\n                this.changeItem(content.children[i], gameConfig.signData[i])\r\n            }\r\n            if (i == 6) {\r\n                this.changeSignStatus7(content.children[i])\r\n            } else {\r\n                this.changeSignStatus(i, content.children[i])\r\n            }\r\n        }\r\n        if (CacheMgr.setting.signNum >= 6 || CacheMgr.setting.lastSignNum == Tools.date_getTimeNum(new Date)) {\r\n            this.hideBtn()\r\n        }\r\n    }\r\n\r\n    private changeItem(node: cc.Node, data: signData) {\r\n        // let one = node.children[0]\r\n        node.children[1].getComponent(cc.Sprite).spriteFrame = this.type_spriteFrame[data.type]\r\n        node.children[2].getComponent(cc.Label).string = data.title\r\n    }\r\n\r\n    private changeSignStatus(i: number, node: cc.Node) {\r\n        if (i == -1) {\r\n            node.getChildByName(\"mask\").active = true\r\n            node.getChildByName(\"签到\").active = true\r\n            return\r\n        }\r\n        if (CacheMgr.setting.signNum >= i) {\r\n            node.getChildByName(\"mask\").active = true\r\n            node.getChildByName(\"签到\").active = true\r\n        } else {\r\n            node.getChildByName(\"mask\").active = false\r\n            node.getChildByName(\"签到\").active = false\r\n        }\r\n    }\r\n\r\n\r\n    private changeSignStatus7(node: cc.Node, isFalse: boolean = false) {\r\n        if (isFalse) {\r\n            node.getChildByName(\"签到\").active = true\r\n            node.getChildByName(\"mask\").active = true\r\n        }\r\n        if (CacheMgr.setting.signNum >= 6) {\r\n            node.getChildByName(\"签到\").active = true\r\n            node.getChildByName(\"mask\").active = true\r\n        } else {\r\n            node.getChildByName(\"签到\").active = false\r\n            node.getChildByName(\"mask\").active = false\r\n        }\r\n    }\r\n\r\n    private handle_get() {\r\n        if (CacheMgr.setting.signNum == 5) {\r\n            gameConfig.singData7.func(1)\r\n            CacheMgr.setting.signNum++\r\n            this.changeSignStatus7(this.items[6], true)\r\n        } else {\r\n            let data = gameConfig.signData[CacheMgr.setting.signNum + 1]\r\n            CacheMgr.setting.signNum++\r\n            this.changeSignStatus(-1, this.items[CacheMgr.setting.signNum])\r\n            data.func(data.num)\r\n        }\r\n        CacheMgr.setting.lastSignNum = Tools.date_getTimeNum(new Date())\r\n        CacheMgr.setting = CacheMgr.setting\r\n        this.hideBtn()\r\n    }\r\n\r\n    private handle_double_get() {\r\n\r\n        Tools.handleVideo().then((res) => {\r\n            if (res) {\r\n                if (CacheMgr.setting.signNum == 5) {\r\n                    gameConfig.singData7.func(2)\r\n                    CacheMgr.setting.signNum++\r\n                    this.changeSignStatus7(this.items[6], true)\r\n                } else {\r\n                    let data = gameConfig.signData[CacheMgr.setting.signNum + 1]\r\n                    CacheMgr.setting.signNum++\r\n                    this.changeSignStatus(-1, this.items[CacheMgr.setting.signNum])\r\n                    data.func(data.num * 2)\r\n                }\r\n\r\n                CacheMgr.setting.lastSignNum = Tools.date_getTimeNum(new Date())\r\n                CacheMgr.setting = CacheMgr.setting\r\n                this.hideBtn()\r\n            }\r\n        })\r\n    }\r\n\r\n    private hideBtn() {\r\n        this.get.active = false\r\n        this.double_get.active = false\r\n    }\r\n\r\n    show(param: any): void {\r\n    }\r\n\r\n    hide() {\r\n    }\r\n\r\n}\r\n"]}