{"version":3,"sources":["assets\\Script\\Common\\ShowConfig.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import Global from \"./Global\";\r\nimport LogMgr from \"./LogMgr\";\r\nimport Tools from \"./Tools\";\r\nimport Emit from \"./manage/Emit/Emit\";\r\nimport EmitData from \"./manage/Emit/EmitData\";\r\nimport QgBanner from \"./manage/Api/QgBanner\";\r\n\r\nexport default class ShowConfig {\r\n\r\n    private static str: string = '';\r\n\r\n    private static showResolve: any = null;\r\n\r\n    public static initEmit() {\r\n        Emit.instance().on(EmitData.IN_NATIVE_NEXT, this.inNativeNext, this);\r\n    }\r\n\r\n\r\n    public static show(str: string) {\r\n        return new Promise((resolve) => {\r\n            this.showResolve = resolve;\r\n            if (!Global.isVivo) {\r\n                this.showResolve(false);\r\n                this.showResolve = null;\r\n                return;\r\n            }\r\n\r\n            if (!str || !Global.config[str]) {\r\n                LogMgr.error('参数为空或者config中不存在该配置:str:' + str);\r\n                this.showResolve(false);\r\n                this.showResolve = null;\r\n                return\r\n            }\r\n            LogMgr.log('检测配置信息');\r\n\r\n            this.str = str;\r\n\r\n\r\n            if (Global.config[this.str].nativeConfig.type == 2) {\r\n                QgBanner.hideBanner();\r\n            }\r\n\r\n            console.log('AAA>>>>>>')\r\n            this.playVideo().then(() => {\r\n                console.log('BBB>>>>>>')\r\n                return this.openNative();\r\n            }).then((res) => {\r\n                if (!res) {\r\n                    this.inNativeNext();\r\n                }\r\n            })\r\n        })\r\n\r\n    }\r\n\r\n    private static playVideo() {\r\n        return new Promise((resolve) => {\r\n            if (Global.config[this.str].startVideo == 0) {\r\n                Global.config[this.str].startVideo = 1;\r\n                resolve(true);\r\n                return\r\n            }\r\n\r\n            if (Tools.checkPer(Global.config[this.str].videoPer)) {\r\n                Tools.handleVideo().then(() => {\r\n                    resolve(true);\r\n                })\r\n            } else {\r\n                resolve(true);\r\n            }\r\n        })\r\n    }\r\n\r\n    private static openNative() {\r\n        return new Promise((resolve) => {\r\n            console.log('CCC>>>>>>');\r\n            if (Global.config[this.str].startNative == 0) {\r\n                Global.config[this.str].startNative = 1;\r\n                resolve(false);\r\n                return\r\n            }\r\n\r\n            if (Tools.checkPer(Global.config[this.str].nativePer)) {\r\n                Tools.showNative(Global.config[this.str].nativeConfig.type, Global.config[this.str].nativeConfig.labelType, Global.config[this.str].nativeConfig.time).then((res) => {\r\n                    resolve(res);\r\n                });\r\n            } else {\r\n                resolve(false);\r\n            }\r\n        })\r\n    }\r\n\r\n    private static openIntersAd() {\r\n        return new Promise((resolve) => {\r\n            console.log('DDD>>>>>>')\r\n            if (Global.config[this.str].startIntersAd == 0) {\r\n                Global.config[this.str].startIntersAd = 1;\r\n                resolve(false);\r\n                return\r\n            }\r\n\r\n            if (Tools.checkPer(Global.config[this.str].intersAdPer)) {\r\n                Tools.handlerInters().then((res) => {\r\n                    resolve(res);\r\n                })\r\n            } else {\r\n                resolve(false);\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n    private static inNativeNext() {\r\n        this.openIntersAd().then((res) => {\r\n            console.log('EEE>>>>>>')\r\n            this.showResolve(true);\r\n            this.showResolve = null;\r\n        })\r\n    }\r\n\r\n}"]}