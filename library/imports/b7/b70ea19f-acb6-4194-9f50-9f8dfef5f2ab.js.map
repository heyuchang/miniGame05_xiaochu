{"version":3,"sources":["assets\\Script\\Common\\manage\\Api\\QgIntersAd.ts"],"names":[],"mappings":";;;;;;AAAA,qCAAgC;AAChC,uCAAkC;AAClC,uCAAkC;AAElC;IAAA;IA8DA,CAAC;IAzDG;;OAEG;IACW,uBAAY,GAA1B;QAAA,iBAoCC;QAnCG,OAAO,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;YAE/B,IAAI,CAAC,gBAAM,CAAC,MAAM,EAAE;gBAChB,gBAAM,CAAC,KAAK,CAAC,kBAAkB,CAAC,CAAC;gBACjC,MAAM,CAAC,KAAK,CAAC,CAAE;gBACf,OAAM;aACT;YAED,IAAI,MAAM,GAAG,eAAK,CAAC,gBAAgB,CAAC,gBAAM,CAAC,MAAM,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,CAAC;YACtF,IAAI,CAAC,MAAM,EAAE;gBACT,gBAAM,CAAC,KAAK,CAAC,WAAW,GAAG,MAAM,CAAC,CAAA;gBAClC,MAAM,CAAC,KAAK,CAAC,CAAE;gBACf,OAAM;aACT;YAED,aAAa;YACb,KAAI,CAAC,kBAAkB,GAAG,MAAM,CAAC,EAAE,CAAC,oBAAoB,CAAC,EAAC,QAAQ,EAAE,MAAM,EAAC,CAAC,CAAC;YAE7E,KAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC,UAAC,GAAG;gBAChC,gBAAM,CAAC,KAAK,CAAC,cAAc,EAAE,GAAG,CAAC,CAAC;YACtC,CAAC,CAAC,CAAA;YAEF,KAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,UAAC,GAAG;gBAC/B,KAAI,CAAC,aAAa,GAAG,IAAI,CAAC;gBAC1B,gBAAM,CAAC,GAAG,CAAC,mBAAmB,EAAE,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC;YACzD,CAAC,CAAC,CAAA;YAEF,KAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC;gBAC5B,KAAI,CAAC,aAAa,GAAG,KAAK,CAAC;gBAC3B,gBAAM,CAAC,GAAG,CAAC,YAAY,CAAC,CAAE;gBAC1B,KAAI,CAAC,YAAY,EAAE,CAAC,IAAI,EAAE,CAAE;YAChC,CAAC,CAAC,CAAA;YAEF,OAAO,CAAC,IAAI,CAAC,CAAA;QACjB,CAAC,CAAC,CAAA;IACN,CAAC;IAED;;OAEG;IACW,qBAAU,GAAxB;QACI,IAAI,CAAC,IAAI,CAAC,aAAa,IAAI,CAAC,IAAI,CAAC,kBAAkB,EAAE;YACjD,gBAAM,CAAC,KAAK,CAAC,aAAa,EAAC,IAAI,CAAC,aAAa,EAAC,aAAa,EAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;YACrF,IAAI,CAAC,YAAY,EAAE,CAAC,IAAI,EAAE,CAAC,KAAK,EAAE,CAAE;YACpC,OAAM;SACT;QAED,IAAI,CAAC,kBAAkB,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC;QAEpC,CAAC,CAAC,CAAC,KAAK,CAAC,UAAC,GAAG;YACT,gBAAM,CAAC,KAAK,CAAC,UAAU,EAAE,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC;QAClD,CAAC,CAAC,CAAA;IACN,CAAC;IA1Da,wBAAa,GAAY,KAAK,CAAC;IA2DjD,iBAAC;CA9DD,AA8DC,IAAA;kBA9DoB,UAAU","file":"","sourceRoot":"/","sourcesContent":["import Tools from \"../../Tools\";\r\nimport Global from \"../../Global\";\r\nimport LogMgr from \"../../LogMgr\";\r\n\r\nexport default class QgIntersAd {\r\n\r\n    private static initInterstitialAd: any; //插屏对象\r\n    public static isLoad_Inters: boolean = false;\r\n\r\n    /**\r\n     * 创建插屏\r\n     */\r\n    public static createInters() {\r\n        return new Promise((resolve, reject) => {\r\n\r\n            if (!Global.isVivo) {\r\n                LogMgr.error('当前非vivo平台，无法创建插屏');\r\n                reject(false) ;\r\n                return\r\n            }\r\n\r\n            let unitId = Tools.getRandomByArray(Global.config.advertisingConfig.interstitialAdId);\r\n            if (!unitId) {\r\n                LogMgr.error('插屏Id获取失败：' + unitId)\r\n                reject(false) ;\r\n                return\r\n            }\r\n\r\n            // @ts-ignore\r\n            this.initInterstitialAd = window.qg.createInterstitialAd({adUnitId: unitId});\r\n\r\n            this.initInterstitialAd.onError((err) => { //监听插屏错误\r\n                LogMgr.error('插屏错误onError:', err);\r\n            })\r\n\r\n            this.initInterstitialAd.onLoad((res) => {\r\n                this.isLoad_Inters = true;\r\n                LogMgr.log('插屏广告加载完成-onload触发', JSON.stringify(res));\r\n            })\r\n\r\n            this.initInterstitialAd.onClose(() =>{\r\n                this.isLoad_Inters = false;\r\n                LogMgr.log('插屏关闭>>>>>>') ;\r\n                this.createInters().then() ;\r\n            })\r\n\r\n            resolve(true)\r\n        })\r\n    }\r\n\r\n    /**\r\n     * 展示插屏\r\n     */\r\n    public static showInters() {\r\n        if (!this.isLoad_Inters || !this.initInterstitialAd) {\r\n            LogMgr.error('插屏加载中......',this.isLoad_Inters,'rewardedAd:',this.initInterstitialAd);\r\n            this.createInters().then().catch() ;\r\n            return\r\n        }\r\n\r\n        this.initInterstitialAd.show().then(() => {\r\n\r\n        }).catch((err) => {\r\n            LogMgr.error('插屏广告展示失败', JSON.stringify(err));\r\n        })\r\n    }\r\n}"]}