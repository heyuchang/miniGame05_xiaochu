{"version":3,"sources":["assets\\Script\\Scene\\Loading.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import Tools from \"../Common/Tools\";\r\nimport JiuWuSDK from \"../SDK/JiuWuSDK\";\r\nimport CacheMgr from \"../Common/manage/CacheMgr\";\r\nimport Global from \"../Common/Global\";\r\nimport Emit from \"../Common/manage/Emit/Emit\";\r\nimport LogMgr from \"../Common/LogMgr\";\r\nimport QgBanner from \"../Common/manage/Api/QgBanner\";\r\nimport EmitData from \"../Common/manage/Emit/EmitData\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Loading extends cc.Component {\r\n\r\n    @property(cc.Node)\r\n    round: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    mask: cc.Node = null;\r\n\r\n    private tween = null;\r\n\r\n    protected onLoad() {\r\n        // @ts-ignore\r\n        if (window.qg) {\r\n            Global.isVivo = true;\r\n        }\r\n        this.mask.width = 0\r\n        //假的进度条\r\n        this.tween = cc.tween(this.mask)\r\n            .to(3, {width: 300}, {easing: \"quadOut\"})\r\n            .start();\r\n        let i = 0;\r\n\r\n\r\n        cc.director.preloadScene(\"Game\")\r\n\r\n        let num = Tools.model_initModel(() => {\r\n            i++\r\n            if (i === num) {\r\n                this.tween.stop();\r\n                cc.tween(this.mask)\r\n                    .to(2, {width: 500}, {easing: 'quadOut'})\r\n                    .call(() => {\r\n                        if (Global.isVivo) {\r\n                            if (JiuWuSDK.initSDK) {\r\n                                this.loadScene();\r\n                            } else {\r\n                                Emit.instance().on(EmitData.LOAD_GAME_SCENE, this.loadScene, this);\r\n                            }\r\n                        } else {\r\n                            cc.director.loadScene('Game');\r\n                        }\r\n                    })\r\n                    .start();\r\n            }\r\n        });\r\n\r\n        this.someMotor();\r\n    }\r\n\r\n    loadScene() {\r\n        cc.director.loadScene('Game');\r\n    }\r\n\r\n\r\n    someMotor() {\r\n        if (!Global.isVivo) {\r\n            return\r\n        }\r\n\r\n        // @ts-ignore\r\n        window.qg.onShow(() => {\r\n            LogMgr.log('Banner刷新>>>>>>onShow', QgBanner.isShow);\r\n            if (QgBanner.isShow) {\r\n                QgBanner.cutBanner().then();\r\n            }\r\n\r\n            cc.audioEngine.resumeMusic()\r\n        })\r\n\r\n        // @ts-ignore\r\n        window.qg.onHide(() => {\r\n\r\n            CacheMgr.updateData();\r\n            cc.audioEngine.pauseMusic()\r\n        })\r\n\r\n        JiuWuSDK.inSet_API_Config().then(() => {\r\n            Emit.instance().emit(EmitData.LOAD_GAME_SCENE);\r\n        })\r\n\r\n    }\r\n}\r\n"]}