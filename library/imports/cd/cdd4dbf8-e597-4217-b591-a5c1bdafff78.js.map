{"version":3,"sources":["assets\\Script\\Common\\manage\\Api\\QgApi.ts"],"names":[],"mappings":";;;;;;AAAA,+BAAwB;AACxB,+CAA0C;AAC1C,2CAAsC;AACtC,uCAAkC;AAClC,uCAAkC;AAClC,uCAAkC;AAClC,uCAAkC;AAElC;IAAA;IA8LA,CAAC;IA3LiB,eAAS,GAAvB;QACI,IAAI,CAAC,gBAAM,CAAC,MAAM;YAAC,OAAQ;QAC3B,IAAI,CAAC,WAAW,EAAE,CAAE;QACpB,IAAI,CAAC,YAAY,EAAE,CAAE;QACrB,IAAI,CAAC,YAAY,EAAE,CAAE;IACzB,CAAC;IAEa,kBAAY,GAA1B;QACI,IAAI,CAAC,gBAAM,CAAC,MAAM;YAAC,OAAQ;QAC3B,IAAI,CAAC,cAAc,EAAE,CAAE;IAC3B,CAAC;IAEc,iBAAW,GAA1B;QAAA,iBAUC;QATG,sBAAY,CAAC,mBAAmB,EAAE,CAAC,IAAI,CAAC;YACpC,sBAAY,CAAC,iBAAiB,EAAE,CAAC,IAAI,EAAE,CAAA;QAC3C,CAAC,CAAC,CAAC,KAAK,CAAC;YACL,UAAU,CAAC;gBACP,IAAI,CAAC,sBAAY,CAAC,eAAe,EAAE;oBAC/B,KAAI,CAAC,WAAW,EAAE,CAAE;iBACvB;YACL,CAAC,EAAC,IAAI,CAAC,CAAA;QACX,CAAC,CAAC,CAAA;IACN,CAAC;IAEc,kBAAY,GAA3B;QAAA,iBAQC;QAPG,oBAAU,CAAC,YAAY,EAAE,CAAC,IAAI,EAAE,CAAC,KAAK,CAAC;YACnC,UAAU,CAAC;gBACP,IAAI,CAAC,oBAAU,CAAC,aAAa,EAAE;oBAC3B,KAAI,CAAC,YAAY,EAAE,CAAE;iBACxB;YACL,CAAC,EAAC,IAAI,CAAC,CAAA;QACX,CAAC,CAAC,CAAA;IACN,CAAC;IAEc,kBAAY,GAA3B;QAAA,iBAUC;QATG,kBAAQ,CAAC,YAAY,EAAE,CAAC,IAAI,CAAC;YACzB,kBAAQ,CAAC,UAAU,EAAE,CAAC,IAAI,EAAE,CAAE;QAClC,CAAC,CAAC,CAAC,KAAK,CAAC;YACL,UAAU,CAAC;gBACP,IAAI,CAAC,kBAAQ,CAAC,aAAa,EAAE;oBACzB,KAAI,CAAC,YAAY,EAAE,CAAE;iBACxB;YACL,CAAC,EAAC,IAAI,CAAC,CAAA;QACX,CAAC,CAAC,CAAA;IACN,CAAC;IAEc,oBAAc,GAA7B;QAAA,iBAYC;QAXG,kBAAQ,CAAC,YAAY,EAAE,CAAC,IAAI,CAAC;YACzB,IAAI,gBAAM,CAAC,MAAM,CAAC,UAAU,CAAC,UAAU,IAAI,CAAC,EAAE;gBAC1C,kBAAQ,CAAC,UAAU,EAAE,CAAE;aAC1B;QACL,CAAC,CAAC,CAAC,KAAK,CAAC;YACL,UAAU,CAAC;gBACP,IAAI,CAAC,kBAAQ,CAAC,MAAM,EAAE;oBAClB,KAAI,CAAC,cAAc,EAAE,CAAE;iBAC1B;YACL,CAAC,EAAC,IAAI,CAAC,CAAA;QACX,CAAC,CAAC,CAAA;IACN,CAAC;IAED;;OAEG;IACW,kBAAY,GAA1B,UAA2B,OAAO;QAC9B,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,KAAK,CAAC,EAAE;YAChC,OAAO,CAAC,IAAI,CAAC,6BAA6B,CAAC,CAAA;YAC3C,OAAM;SACT;QACD,IAAI,GAAG,GAAG,OAAO,CAAC,GAAG,CAAA;QACrB,IAAI,IAAI,GAAQ,IAAI,CAAA;QACpB,IAAI,KAAK,GAAQ,EAAE,CAAA;QACnB,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,QAAQ,CAAC,EAAE;YACnC,KAAK,CAAC,MAAM,GAAG,KAAK,CAAA;SACvB;aAAM;YACH,KAAK,CAAC,MAAM,GAAG,OAAO,CAAC,MAAM,CAAA;SAChC;QAED,IAAI,OAAO,CAAC,cAAc,CAAC,MAAM,CAAC,EAAE;YAChC,IAAI,GAAG,OAAO,CAAC,IAAI,CAAA;SACtB;QAED,IAAI,OAAO,CAAC,cAAc,CAAC,SAAS,CAAC,EAAE;YACnC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC,OAAO,CAAA;SAClC;QAED,IAAI,OAAO,CAAC,cAAc,CAAC,QAAQ,CAAC,EAAE;YAClC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC,MAAM,CAAA;SACjC;QACD,KAAK,CAAC,UAAU,GAAG,IAAI,CAAA;QAEvB,eAAG,CAAC,OAAO,CAAC,GAAG,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC,IAAI,CAAC,UAAA,IAAI;YACnC,IAAI,OAAO,CAAC,cAAc,CAAC,SAAS,CAAC,EAAE;gBACnC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAA;aACxB;QACL,CAAC,CAAC,CAAC,KAAK,CAAC,UAAA,CAAC;YACN,IAAI,OAAO,CAAC,cAAc,CAAC,MAAM,CAAC,EAAE;gBAChC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;aACrB;QACL,CAAC,CAAC,CAAA;IAEN,CAAC;IAED;;OAEG;IACW,WAAK,GAAnB;QACI,OAAO,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;YAC/B,aAAa;YACb,IAAI,EAAE,CAAC,iBAAiB,EAAE,CAAC,mBAAmB,IAAI,IAAI,EAAE;gBACpD,aAAa;gBACb,MAAM,CAAC,EAAE,CAAC,KAAK,EAAE,CAAC,IAAI,CAAC,UAAC,GAAG;oBACvB,IAAI,GAAG,CAAC,IAAI,CAAC,KAAK,EAAE;wBAChB,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA;wBACrC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;qBAC3B;gBACL,CAAC,EAAE,UAAC,GAAG;oBACH,OAAO,CAAC,KAAK,CAAC,CAAC;oBACf,OAAO,CAAC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC;gBAChD,CAAC,CAAC,CAAA;aACL;iBAAM;gBACH,OAAO,CAAC,KAAK,CAAC,CAAC;gBACf,OAAO,CAAC,KAAK,CAAC,YAAY,CAAC,CAAA;aAC9B;QACL,CAAC,CAAC,CAAA;IACN,CAAC;IAED;;OAEG;IACW,WAAK,GAAnB;QACI,aAAa;QACb,EAAE,CAAC,KAAK,EAAE,CAAA;IACd,CAAC;IAED;;OAEG;IACW,oBAAc,GAA5B;QACI,OAAO,IAAI,OAAO,CAAC,UAAC,OAAO,EAAC,MAAM;YAC9B,aAAa;YACb,EAAE,CAAC,oBAAoB,CAAC;gBACpB,OAAO,EAAG,UAAC,GAAG;oBACV,IAAI,GAAG,EAAE;wBACL,OAAO,CAAC,KAAK,CAAC,CAAE;qBACnB;yBAAK;wBACF,OAAO,CAAC,IAAI,CAAC,CAAE;qBAClB;gBACL,CAAC;gBACD,IAAI,EAAG,UAAC,GAAG;oBACP,gBAAM,CAAC,GAAG,CAAC,GAAG,CAAC,CAAE;oBACjB,MAAM,CAAC,KAAK,CAAC,CAAE;gBACnB,CAAC;aACJ,CAAC,CAAA;QACN,CAAC,CAAC,CAAA;IACN,CAAC;IAED;;OAEG;IACW,qBAAe,GAA7B;QAAA,iBAyBC;QAxBG,OAAO,IAAI,OAAO,CAAC,UAAC,OAAO;YACvB,KAAI,CAAC,cAAc,EAAE,CAAC,IAAI,CAAC,UAAC,GAAG;gBAC3B,IAAI,GAAG,EAAE;oBACL,aAAa;oBACb,EAAE,CAAC,eAAe,CAAC;wBACf,OAAO,EAAG,kBAAkB;wBAC5B,OAAO,EAAG;4BACN,gBAAM,CAAC,GAAG,CAAC,MAAM,CAAC,CAAE;4BACpB,OAAO,CAAC,IAAI,CAAC,CAAE;wBACnB,CAAC;wBACD,IAAI,EAAG;4BACH,gBAAM,CAAC,KAAK,CAAC,MAAM,CAAC,CAAE;4BACtB,OAAO,CAAC,KAAK,CAAC,CAAE;wBACpB,CAAC;qBACJ,CAAC,CAAA;iBACL;qBAAK;oBACF,OAAO,CAAC,KAAK,CAAC,CAAE;oBAChB,OAAM;iBACT;YACL,CAAC,CAAC,CAAC,KAAK,CAAC;gBACL,OAAO,CAAC,KAAK,CAAC,CAAE;gBAChB,OAAM;YACV,CAAC,CAAC,CAAA;QACN,CAAC,CAAC,CAAA;IACN,CAAC;IAGL,YAAC;AAAD,CA9LA,AA8LC,IAAA","file":"","sourceRoot":"/","sourcesContent":["import fly from \"flyio\";\r\nimport QgRewardedAd from \"./QgRewardedAd\";\r\nimport QgIntersAd from \"./QgIntersAd\";\r\nimport QgBanner from \"./QgBanner\";\r\nimport Global from \"../../Global\";\r\nimport QgNative from \"./QgNative\";\r\nimport LogMgr from \"../../LogMgr\";\r\n\r\nexport default class QgApi {\r\n\r\n\r\n    public static createAdv () {\r\n        if (!Global.isVivo)return ;\r\n        this.createVideo() ;\r\n        this.createInters() ;\r\n        this.createNative() ;\r\n    }\r\n\r\n    public static createBanner () {\r\n        if (!Global.isVivo)return ;\r\n        this.createBannerAd() ;\r\n    }\r\n\r\n    private static createVideo() {\r\n        QgRewardedAd.createRewardedVideo().then(()=>{\r\n            QgRewardedAd.loadRewardedVideo().then()\r\n        }).catch(()=>{\r\n            setTimeout(()=>{\r\n                if (!QgRewardedAd.isLoad_Rewarded) {\r\n                    this.createVideo() ;\r\n                }\r\n            },5000)\r\n        })\r\n    }\r\n\r\n    private static createInters() {\r\n        QgIntersAd.createInters().then().catch(()=>{\r\n            setTimeout(()=>{\r\n                if (!QgIntersAd.isLoad_Inters) {\r\n                    this.createInters() ;\r\n                }\r\n            },5000)\r\n        })\r\n    }\r\n\r\n    private static createNative() {\r\n        QgNative.createNative().then(()=>{\r\n            QgNative.loadNative().then() ;\r\n        }).catch(()=>{\r\n            setTimeout(()=>{\r\n                if (!QgNative.isLoad_Native) {\r\n                    this.createNative() ;\r\n                }\r\n            },5000)\r\n        })\r\n    }\r\n\r\n    private static createBannerAd() {\r\n        QgBanner.createBanner().then(()=>{\r\n            if (Global.config.gameConfig.bannerShow == 1) {\r\n                QgBanner.showBanner() ;\r\n            }\r\n        }).catch(()=>{\r\n            setTimeout(()=>{\r\n                if (!QgBanner.isLoad) {\r\n                    this.createBannerAd() ;\r\n                }\r\n            },5000)\r\n        })\r\n    }\r\n\r\n    /**\r\n     * 发起HTTPS网络请求\r\n     */\r\n    public static sponsorHttps(options) {\r\n        if (!options.hasOwnProperty(\"url\")) {\r\n            console.warn(\"request param  url is  null\")\r\n            return\r\n        }\r\n        let url = options.url\r\n        let data: any = null\r\n        let param: any = {}\r\n        if (!options.hasOwnProperty(\"method\")) {\r\n            param.method = \"GET\"\r\n        } else {\r\n            param.method = options.method\r\n        }\r\n\r\n        if (options.hasOwnProperty(\"data\")) {\r\n            data = options.data\r\n        }\r\n\r\n        if (options.hasOwnProperty(\"timeOut\")) {\r\n            param.timeout = options.timeout\r\n        }\r\n\r\n        if (options.hasOwnProperty(\"header\")) {\r\n            param.headers = options.header\r\n        }\r\n        param.pareseJson = true\r\n\r\n        fly.request(url, data, param).then(data => {\r\n            if (options.hasOwnProperty(\"success\")) {\r\n                options.success(data)\r\n            }\r\n        }).catch(e => {\r\n            if (options.hasOwnProperty(\"fail\")) {\r\n                options.fail(data)\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n    /**\r\n     * 登录\r\n     */\r\n    public static login() {\r\n        return new Promise((resolve, reject) => {\r\n            // @ts-ignore\r\n            if (qg.getSystemInfoSync().platformVersionCode >= 1063) {\r\n                // @ts-ignore\r\n                window.qg.login().then((res) => {\r\n                    if (res.data.token) {\r\n                        console.log('登录成功!!', res.data.token)\r\n                        resolve(res.data.token);\r\n                    }\r\n                }, (err) => {\r\n                    resolve(false);\r\n                    console.error('登录失败' + JSON.stringify(err));\r\n                })\r\n            } else {\r\n                resolve(false);\r\n                console.error('版本号过低，无法登录')\r\n            }\r\n        })\r\n    }\r\n\r\n    /**\r\n     * 分享\r\n     */\r\n    public static share() {\r\n        // @ts-ignore\r\n        qg.share()\r\n    }\r\n\r\n    /**\r\n     * 判断是否已创建桌面图标\r\n     */\r\n    public static judgeShortIcon () {\r\n        return new Promise((resolve,reject)=>{\r\n            // @ts-ignore\r\n            qg.hasShortcutInstalled({\r\n                success : (res)=>{\r\n                    if (res) {\r\n                        resolve(false) ;\r\n                    }else {\r\n                        resolve(true) ;\r\n                    }\r\n                },\r\n                fail : (err)=>{\r\n                    LogMgr.log(err) ;\r\n                    reject(false) ;\r\n                }\r\n            })\r\n        })\r\n    }\r\n\r\n    /**\r\n     * 添加桌面图标\r\n     */\r\n    public static addShortcutIcon () {\r\n        return new Promise((resolve)=>{\r\n            this.judgeShortIcon().then((res)=>{\r\n                if (res) {\r\n                    // @ts-ignore\r\n                    qg.installShortcut({\r\n                        message : '创建桌面游戏图标，快捷进入游戏！',\r\n                        success : ()=>{\r\n                            LogMgr.log('创建成功') ;\r\n                            resolve(true) ;\r\n                        },\r\n                        fail : ()=>{\r\n                            LogMgr.error('创建失败') ;\r\n                            resolve(false) ;\r\n                        }\r\n                    })\r\n                }else {\r\n                    resolve(false) ;\r\n                    return\r\n                }\r\n            }).catch(()=>{\r\n                resolve(false) ;\r\n                return\r\n            })\r\n        })\r\n    }\r\n\r\n\r\n}"]}