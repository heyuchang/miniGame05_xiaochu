{"version":3,"sources":["assets\\Script\\Common\\manage\\TimerMgr.ts"],"names":[],"mappings":";;;;;;AAAA,uCAAkC;AAClC,kCAA6B;AAC7B,oCAA+B;AAC/B,4CAA0C;AAE1C;;GAEG;AACH;IACI;QAAA,iBAKC;QAJG,QAAQ;QACR,MAAM,CAAC,WAAW,CAAC;YACf,KAAI,CAAC,MAAM,EAAE,CAAA;QACjB,CAAC,EAAE,IAAI,CAAC,CAAA;IACZ,CAAC;IAED,yBAAM,GAAN;QACI,MAAM;QACN,IAAI,OAAO,GAAG,IAAI,IAAI,EAAE,CAAC;QACzB,IAAI,OAAO,GAAG,eAAK,CAAC,eAAe,CAAC,OAAO,CAAC,CAAA;QAC5C,IAAI,OAAO,IAAI,kBAAQ,CAAC,UAAU,EAAE;YAChC,cAAc;YACd,kBAAQ,CAAC,mBAAmB,GAAG,EAAE,CAAA;YACjC,kBAAQ,CAAC,WAAW,GAAG,EAAE,CAAA;YACzB,cAAI,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,oBAAS,CAAC,eAAe,CAAC,CAAA;YAC/C,kBAAQ,CAAC,UAAU,GAAG,OAAO,CAAA;SAChC;IACL,CAAC;IACL,eAAC;AAAD,CApBA,AAoBC,IAAA;AAED,kBAAe,IAAI,QAAQ,EAAE,CAAC","file":"","sourceRoot":"/","sourcesContent":["import CacheMgr from \"./CacheMgr\";\r\nimport Tools from \"../Tools\";\r\nimport Emit from \"./Emit/Emit\";\r\nimport {EventCode} from \"./Emit/EmitData\";\r\n\r\n/**\r\n *  总定时器 ， 用来 判断签到 或者恢复体力  每分钟判断\r\n */\r\nclass TimerMgr {\r\n    constructor() {\r\n        //每秒进行判断\r\n        window.setInterval(() => {\r\n            this.update()\r\n        }, 1000)\r\n    }\r\n\r\n    update() {\r\n        //每秒执行\r\n        let nowTime = new Date();\r\n        let dataNum = Tools.date_getTimeNum(nowTime)\r\n        if (dataNum != CacheMgr.exportTime) {\r\n            //新的一天 ，重置导出。。\r\n            CacheMgr.earlyExportTripPart = []\r\n            CacheMgr.earlyExport = []\r\n            Emit.instance().emit(EventCode.GAME_BOX_UPDATE)\r\n            CacheMgr.exportTime = dataNum\r\n        }\r\n    }\r\n}\r\n\r\nexport default new TimerMgr();\r\n"]}